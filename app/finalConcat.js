var evalApp=angular.module("evalApp",["ui.bootstrap","ui.router","loadingButton"]);evalApp.config(["$stateProvider","$urlRouterProvider",function(e,l){l.otherwise("/login"),e.state("loginView",{url:"/login",templateUrl:"views/loginView.html",controller:"loginController"}).state("evalOverView",{url:"/overview",templateUrl:"views/evalOverView.html",controller:"evalOverViewController"}).state("adminDashboard",{url:"/adminDashboard",templateUrl:"views/adminDashboard.html",controller:"adminDashboardController"})}]);
evalApp.controller("adminDashboardController",["$scope","$rootScope","$state","mainFactory",function(){console.log("adminDashboardController says hi")}]);
evalApp.controller("evalOverViewController",["$scope","$rootScope","$http","$state","mainFactory",function(e,o,t,r,l){l.getCourses()}]);
evalApp.controller("loginController",["$scope","$rootScope","mainFactory",function(o,n,a){o.isSuccess=!1,o.loginData={},o.login=function(){o.loginData.user=o.username,o.loginData.pass=o.password,a.login(o.loginData)}}]);
evalApp.factory("authInterceptor",["$rootScope","$q","$window",function(e,t,r){return{request:function(e){return e.header=e.headers||{},r.sessionStorage.token&&(e.headers.Authorization="Basic "+r.sessionStorage.token),e},response:function(e){return 401===e.status,e||t.when(e)}}}]),evalApp.config(["$httpProvider",function(e){e.interceptors.push("authInterceptor")}]);
evalApp.factory("mainFactory",["$http","$window","$rootScope","$state",function(o,e,n,t){var s="http://localhost:19358/api/v1/";return{login:function(n){o.post(s+"login",n).success(function(o){e.sessionStorage.token=o.Token,t.go("admin"==o.User.Role?"adminDashboard":"evalOverView")}).error(function(o,n){delete e.sessionStorage.token,console.log("Error: "+n)})},getCourses:function(){o.get(s+"my/courses").success(function(o){console.log(o)})}}}]);